{% extends "layout.html" %} {% block content %}
<h2 class="text-center mb-4">ðŸ’° Budget Tracker</h2>
<p class="text-center">
  Balance: <strong>${{ "%.2f"|format(balance) }}</strong>
</p>

<form method="post" class="row g-2 mb-4">
  <div class="col-md-4">
    <input
      type="number"
      name="amount"
      step="0.01"
      class="form-control"
      placeholder="Amount"
      required
    />
  </div>
  <div class="col-md-4">
    <input
      type="text"
      name="category"
      class="form-control"
      placeholder="Category"
      required
    />
  </div>
  <div class="col-md-4">
    <select name="type" class="form-select">
      <option value="Income">Income</option>
      <option value="Expense">Expense</option>
    </select>
  </div>
  <div class="col-12 text-center">
    <button class="btn btn-success w-100">Add Entry</button>
  </div>
</form>

<canvas id="expenseChart" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  fetch("/chart-data")
    .then((res) => res.json())
    .then((data) => {
      const ctx = document.getElementById("expenseChart");
      const labels = Object.keys(data);
      const values = Object.values(data);

      new Chart(ctx, {
        type: "pie",
        data: {
          labels: labels,
          datasets: [
            {
              data: values,
              backgroundColor: [
                "#ff6384",
                "#36a2eb",
                "#ffcd56",
                "#4bc0c0",
                "#9966ff",
              ],
            },
          ],
        },
      });
    });
</script>
{% endblock %}
